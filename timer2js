let countdown; // setInterval countdown
let eventInSession; // setTimeout
const clock = document.getElementById('clock'); //clock container div
const livestreamButton = document.getElementById('door'); // live stream button div
const daysUnit = document.querySelector('.days'); // days unit span
const hourUnit = document.querySelector('.hours'); // hours unit span
const minutesUnit = document.querySelector('.minutes'); // minutes unit span
const secondsUnit = document.querySelector('.seconds'); // seconds unit span

const startDate = new Date(2018, 8, 7, 11, 30, 00).getTime();

const CountDownDate = new Date(2018, 9, 30, 00,00,00,00).getTime()

startDate >Date.now() ? timer(startDate) : calculateFutureDate(startDate);

function timer(date){
    //countdown holds timer
    countdown = setInterval(()=>{
        const now = Date.now();// current-future
        const differenceInTime = CountDownDate-now;

        //if clock for zero

        if(differenceInTime < 0){
            clearInterval(countdown);//clear timer
            clock.classList.add('hide');// hides btn
            livestreamButton.classList.remove('hide');
            //keeps btn then
            eventInSession = setTimeout(()=>{
                livestreamButton.classList.add('hide');//hide live strm btn
                calculateFutureDate(date);//past the date that countdown was counting down to
                clock.classList.remove('hide')//show clock
            },7200000);// 2 hour timer
            return;
        }
        timeLeft(differenceInTime);// each update distance to time left function
    }, 1000);//every 1 second
}

function timeLeft(time){
    const days = Math.floor(time /(1000 * 60 * 60 * 24));//milli to days
    const hours = Math.floor(time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60);//mili to hour
    const minutes = Math.floor(time % (1000 * 60 * 60)) / (1000 * 60);// milli to min
    const seconds = Math.floor(time % (1000 * 60)) / (1000);// mili to sec
    //conditionals for proper zero placement in fron of numbers <10
    const displayDays = `${days <10 ? '0' : ''}${days}`;//these make the strings to be displayed
    const displayHours = `${hours <10 ? '0' : ''}${hours}`;
    const displayMinutes = `${minutes <10 ? '0' : ''}${minutes}`;
    const displaySeconds = `${seconds <10 ? '0' : ''}${seconds}`;
    //display time strings on page
    daysUnit.textContent = displayDays;
    hourUnit,textContent = displayHours;
    minutesUnit.textContent = displayMinutes;
    secondsUnit.textContent = displaySeconds;
    //next line for testing
    //console.log(displayDays+":"+displayHours+':'+displayMinutes+':'+displaySeconds);
}

//function calculateFutureDate//(dateToChange){
    //const newDate =new Date(dateToChange);
   // const weeklyDate = newDate.setDate(newDate.getDate() + 07);
    //timer(weeklyDate);}


